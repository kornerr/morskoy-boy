<!DOCTYPE html>
<html>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <body>
        <script>

function позициюВИндекс(ряд, столбец)
{
    return Number(ряд * 1000) + Number(столбец);
}

function индексВПозицию(индекс)
{
    var ряд = Math.round(индекс / 1000);
    var столбец = индекс - ряд * 1000;
    return [ряд, столбец];
}

function индексыКораблей(строковоеПоле)
{
    var индексы = {};

    var поле = строковоеПоле.trim();
    console.log("поле:\n" + поле);
    var строки = поле.split(/\n/);
    //console.log("строки:", строки);
    for (var ряд in строки)
    {
        var строка = строки[ряд];
        var элементы = строка.split(" ");
        for (var столбец in элементы)
        {
            var элемент = элементы[столбец];
            if (элемент == "1")
            {
                var индекс = позициюВИндекс(ряд, столбец);
                индексы[индекс] = true;
                //console.log("элемент(" + ряд + "," + столбец + "): '" + элемент + "'");
                //console.log("индекс(" + ряд + "," + столбец + "): '" + индекс + "'");
            }
        }
    }

    return индексы;
}

function определитьКорабль(индексы, индекс)
{
    console.log("определитьКорабль(" + индекс + ")");
    var начало = индексВПозицию(индекс);

    // Проверим длину вправо.
    var шаг = [0, 1];
    var длина = 1;
    for (var номер = 1; номер < 5; ++номер)
    {
        var ряд = начало[0] + шаг[0] * номер;
        var столбец = начало[1] + шаг[1] * номер;
        var ип = позициюВИндекс(ряд, столбец);
        console.log("определитьКорабль. позиция: '" + ряд + "," + столбец + "' индекс: '" + ип + "'");
        if (ип in индексы)
        {
            console.log("позиция есть");
            var активен = индексы[ип];
            if (активен)
            {
                ++длина;
                индексы[ип] = false;
                console.log("y");
            }
        }
        else
        {
            console.log("позиции нет");
            break;
        }
    }
    console.log("длина:", длина);
    // НАДО Проверим длину влево.
    // НАДО Проверим длину вверх.
    // НАДО Проверим длину вниз.
}

var поле =
    `
1 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 1 0 0 1 1 0 0 0 0
0 0 0 0 0 0 0 0 1 0
0 0 0 0 0 1 0 0 1 0
1 0 0 0 0 1 0 0 0 0
1 0 0 0 0 1 0 0 0 0
1 0 0 0 0 0 0 0 0 0
1 0 0 1 1 1 1 0 0 0
1 0 0 0 0 0 0 0 0 0
    `;
var индексы = индексыКораблей(поле);
console.log("индексы кораблей:", индексы);
for (var индекс in индексы)
{
    console.log("индекс:", индекс, индексВПозицию(индекс));
}

var колвоКораблей = 0;

for (var индекс in индексы)
{
    var активен = индексы[индекс];
    console.log("индекс '" + индекс + "': '" + активен + "'");
    if (активен)
    {
        индексы[индекс] = false;
        определитьКорабль(индексы, индекс);
        ++колвоКораблей;
    }
}

console.log("Количество кораблей:", колвоКораблей);
        </script>
    </body>
</html>
